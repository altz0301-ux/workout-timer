<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Workout">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 192 192'%3E%3Crect fill='%231a1a2e' width='192' height='192' rx='40'/%3E%3Ctext x='96' y='130' font-size='80' font-weight='bold' fill='white' text-anchor='middle' font-family='sans-serif'%3Eüí™%3C/text%3E%3C/svg%3E">
    <title>Workout Timer</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            height: 100vh;
            color: #e0e0e0;
            overflow: hidden;
        }

        .main-container {
            display: flex;
            height: 100vh;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* „Çø„Ç§„É†„É©„Ç§„É≥ÔºàÂ∑¶ÂÅ¥„É°„Ç§„É≥Ôºâ */
        .timeline-container {
            flex: 1;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-right: 2px solid rgba(138, 43, 226, 0.3);
            padding: 20px;
            overflow-y: auto;
        }

        .timeline-section {
            margin-bottom: 30px;
        }

        .timeline-section-title {
            font-size: 12px;
            font-weight: 600;
            color: #bb86fc;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .timeline-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 12px;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
            background: rgba(255, 255, 255, 0.03);
            cursor: pointer;
        }

        .timeline-item:hover {
            background: rgba(187, 134, 252, 0.15) !important;
            transform: translateX(5px);
            border-left-color: #bb86fc !important;
        }

        .timeline-item.work-item {
            border-left-color: #00ff88;
        }

        .timeline-item.rest-item {
            border-left-color: #ffaa00;
        }

        .timeline-item.completed {
            background: rgba(255, 255, 255, 0.05);
            opacity: 0.4;
        }

        .timeline-item.completed .timeline-icon {
            background: #00ff88;
            color: #000;
        }

        .timeline-item.current {
            background: linear-gradient(90deg, rgba(255, 110, 199, 0.25) 0%, rgba(187, 134, 252, 0.25) 100%);
            border-left-color: #ff6ec7;
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 110, 199, 0.4);
        }

        .timeline-item.current .timeline-icon {
            background: linear-gradient(135deg, #ff6ec7 0%, #bb86fc 100%);
            color: #000;
            animation: pulse 2s infinite;
            font-weight: 900;
        }

        .timeline-item.upcoming {
            opacity: 0.6;
        }

        .timeline-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            color: #a0a0a0;
            flex-shrink: 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .timeline-content {
            margin-left: 15px;
            flex: 1;
        }

        .timeline-exercise {
            font-size: 16px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 3px;
        }

        .timeline-duration {
            font-size: 12px;
            color: #a0a0a0;
            font-family: 'Orbitron', monospace;
        }

        /* Âè≥ÂÅ¥Ôºö„Çø„Ç§„Éû„ÉºÔºã„Ç≥„É≥„Éà„É≠„Éº„É´ */
        .control-panel {
            width: 380px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .status {
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            padding: 8px 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
            border: 2px solid;
        }

        .status.preparation {
            background: rgba(0, 217, 255, 0.1);
            color: #00d9ff;
            border-color: #00d9ff;
            animation: pulse-status 2s infinite;
        }

        .status.work {
            background: rgba(0, 255, 136, 0.1);
            color: #00ff88;
            border-color: #00ff88;
        }

        .status.rest {
            background: rgba(255, 170, 0, 0.1);
            color: #ffaa00;
            border-color: #ffaa00;
        }

        .status.stretch {
            background: rgba(187, 134, 252, 0.1);
            color: #bb86fc;
            border-color: #bb86fc;
        }

        .exercise-name {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 30px;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
        }

        .timer {
            text-align: center;
            font-size: 140px;
            font-weight: 900;
            margin: 40px 0;
            font-family: 'Orbitron', monospace;
            text-shadow: 0 0 60px currentColor;
            letter-spacing: 5px;
            line-height: 1;
        }

        .timer.preparation {
            color: #00d9ff;
            animation: pulse-timer 1s infinite;
        }

        .timer.work {
            color: #00ff88;
        }

        .timer.rest {
            color: #ffaa00;
        }

        .timer.stretch {
            color: #bb86fc;
        }

        .progress-container {
            width: 100%;
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #bb86fc 0%, #ff6ec7 100%);
            transition: width 0.3s ease;
            box-shadow: 0 0 20px rgba(187, 134, 252, 0.5);
        }

        .progress-text {
            text-align: center;
            font-size: 11px;
            color: #a0a0a0;
            font-family: 'Orbitron', monospace;
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            width: 100%;
            margin-bottom: 20px;
        }

        button {
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 700;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .start-btn {
            background: linear-gradient(135deg, #00ff88 0%, #00d9ff 100%);
            color: #000;
            font-weight: 900;
        }

        .start-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.5);
        }

        .pause-btn {
            background: linear-gradient(135deg, #ffaa00 0%, #ff6ec7 100%);
            color: #000;
            font-weight: 900;
        }

        .pause-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 110, 199, 0.5);
        }

        .reset-btn {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            color: #fff;
            font-weight: 900;
        }

        .reset-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(255, 65, 108, 0.5);
        }

        button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: none !important;
        }

        .how-to-btn {
            background: linear-gradient(135deg, #bb86fc 0%, #ff6ec7 100%);
            color: #000;
            border: none;
            border-radius: 10px;
            padding: 10px 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            width: 100%;
        }

        .how-to-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(187, 134, 252, 0.5);
        }

        /* „É¢„Éº„ÉÄ„É´ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            overflow-y: auto;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(187, 134, 252, 0.3);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7), 0 0 40px rgba(187, 134, 252, 0.2);
        }

        .modal-close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            font-weight: bold;
            color: #ff6ec7;
            cursor: pointer;
            transition: color 0.3s;
        }

        .modal-close:hover {
            color: #fff;
        }

        .modal-title {
            color: #ff6ec7;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            padding-right: 30px;
            text-shadow: 0 0 20px rgba(255, 110, 199, 0.5);
        }

        .modal-steps {
            list-style: none;
            padding: 0;
        }

        .modal-steps li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            line-height: 1.6;
            color: #e0e0e0;
        }

        .modal-steps li:last-child {
            border-bottom: none;
        }

        .modal-steps li:empty {
            padding: 5px 0;
            border: none;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        @keyframes pulse-status {
            0%, 100% {
                box-shadow: 0 0 10px rgba(0, 217, 255, 0.5);
            }
            50% {
                box-shadow: 0 0 20px rgba(0, 217, 255, 0.8);
            }
        }

        @keyframes pulse-timer {
            0%, 100% {
                text-shadow: 0 0 60px #00d9ff, 0 0 100px #00d9ff;
            }
            50% {
                text-shadow: 0 0 80px #00d9ff, 0 0 120px #00d9ff;
            }
        }

        /* „Çπ„ÇØ„É≠„Éº„É´„Éê„Éº */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #bb86fc 0%, #ff6ec7 100%);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #ff6ec7 0%, #bb86fc 100%);
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media (max-width: 900px) {
            .main-container {
                flex-direction: column;
            }

            .timeline-container {
                flex: none;
                height: 40vh;
                border-right: none;
                border-bottom: 2px solid rgba(138, 43, 226, 0.3);
                padding: 15px;
            }

            .control-panel {
                width: 100%;
                height: 60vh;
                padding: 20px;
            }

            .timer {
                font-size: 100px;
                margin: 30px 0;
            }

            .exercise-name {
                font-size: 20px;
                margin-bottom: 20px;
            }

            .status {
                font-size: 12px;
                padding: 6px 15px;
            }

            .timeline-item {
                padding: 10px 12px;
            }

            .timeline-exercise {
                font-size: 14px;
            }

            .timeline-icon {
                width: 32px;
                height: 32px;
                font-size: 12px;
            }

            button {
                font-size: 12px;
                padding: 10px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Â∑¶ÂÅ¥Ôºö„Çø„Ç§„É†„É©„Ç§„É≥Ôºà„É°„Ç§„É≥Ôºâ -->
        <div class="timeline-container">
            <div class="timeline-section">
                <div class="timeline-section-title">
                    üí™ HIIT (13.5ÂàÜ)
                </div>
                <div id="hiitTimeline"></div>
            </div>

            <div class="timeline-section">
                <div class="timeline-section-title">
                    üßò Stretch (7ÂàÜ)
                </div>
                <div id="stretchTimeline"></div>
            </div>
        </div>

        <!-- Âè≥ÂÅ¥Ôºö„Çø„Ç§„Éû„ÉºÔºã„Ç≥„É≥„Éà„É≠„Éº„É´ -->
        <div class="control-panel">
            <div class="status" id="status">Ready</div>
            
            <div class="exercise-name" id="exercise">„Éê„Éº„Éî„Éº</div>
            
            <div class="timer" id="timer">10</div>

            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress" style="width: 0%"></div>
                </div>
                <div class="progress-text" id="progressText">0 / 22</div>
            </div>

            <div class="controls">
                <button class="start-btn" id="startBtn" onclick="startWorkout()">‚ñ∂ Start</button>
                <button class="pause-btn" id="pauseBtn" onclick="togglePause()" disabled>‚è∏ Pause</button>
                <button class="reset-btn" id="resetBtn" onclick="resetWorkout()">‚Üª Reset</button>
            </div>

            <button class="how-to-btn" id="howToBtn" onclick="showHowTo()">üìñ „ÇÑ„ÇäÊñπ</button>
        </div>

        <!-- „É¢„Éº„ÉÄ„É´ -->
        <div id="howToModal" class="modal" onclick="closeModalOnOutside(event)">
            <div class="modal-content" onclick="event.stopPropagation()">
                <span class="modal-close" onclick="closeHowTo()">&times;</span>
                <h2 class="modal-title" id="modalTitle">„Éê„Éº„Éî„Éº</h2>
                <ul class="modal-steps" id="modalSteps"></ul>
            </div>
        </div>
    </div>

    <script>
        const hiitExercises = [
            { 
                name: '„Éê„Éº„Éî„Éº', 
                sets: 4,
                howTo: [
                    '1. Áõ¥Á´ã„Åã„ÇâÁ¥†Êó©„Åè„Åó„ÇÉ„Åå„ÇÄ',
                    '2. ‰∏°Êâã„ÇíÂ∫ä„Å´„Å§„Åè',
                    '3. Ë∂≥„ÇíÂæå„Çç„Å´‰º∏„Å∞„Åó„Å¶„Éó„É©„É≥„ÇØÂßøÂã¢',
                    '4. Ë∂≥„ÇíÊàª„Åó„Å¶„Åó„ÇÉ„Åå„ÅøÂßøÂã¢',
                    '5. „Ç∏„É£„É≥„Éó„Åó„Å¶Êâã„ÇíÈ†≠‰∏ä„Å´',
                    '‚Äª7Ââ≤„ÅÆÂäõ„Åß„ÄÅÂëºÂê∏„ÇíÊ≠¢„ÇÅ„Å™„ÅÑ'
                ]
            },
            { 
                name: '„Éó„ÉÉ„Ç∑„É•„Ç¢„ÉÉ„Éó', 
                sets: 3,
                howTo: [
                    '1. „ÅÜ„Å§‰ºè„Åõ„ÄÅÊâã„ÇíËÇ©ÂπÖ„Çà„ÇäÂ∫É„ÇÅ„Å´ÁΩÆ„Åè',
                    '2. ‰Ωì„Çí‰∏ÄÁõ¥Á∑ö„Å´‰øù„Å§',
                    '3. ËÇò„ÇíÊõ≤„Åí„Å¶ËÉ∏„ÇíÂ∫ä„Å´Ëøë„Å•„Åë„Çã',
                    '4. Êäº„Åó‰∏ä„Åí„Å¶ÂÖÉ„ÅÆÂßøÂã¢„Å´',
                    '‚Äª„Åç„Å§„ÅÑÂ†¥Âêà„ÅØËÜù„Çí„Å§„ÅÑ„Å¶OK',
                    '‚ÄªËÉ∏„ÅÆÁ≠ãËÇâ„ÇíÊÑèË≠ò'
                ]
            },
            { 
                name: '„Éû„Ç¶„É≥„ÉÜ„É≥„ÇØ„É©„Ç§„Éû„Éº', 
                sets: 3,
                howTo: [
                    '1. „Éó„É©„É≥„ÇØÂßøÂã¢ÔºàËÖïÁ´ã„Å¶‰ºè„Åõ„ÅÆÂßøÂã¢Ôºâ',
                    '2. Âè≥ËÜù„ÇíËÉ∏„Å´Âºï„ÅçÂØÑ„Åõ„Çã',
                    '3. Á¥†Êó©„ÅèÂ∑¶Âè≥„ÇíÂÖ•„ÇåÊõø„Åà„Çã',
                    '4. Ëµ∞„Çã„Çà„ÅÜ„Å´Ë∂≥„ÇíÂãï„Åã„Åô',
                    '‚ÄªËÖ∞„Åå‰∏ä„Åå„Çâ„Å™„ÅÑ„Çà„ÅÜ„Å´',
                    '‚ÄªËÖπÁ≠ã„Å´Âäõ„ÇíÂÖ•„Çå„Çã'
                ]
            },
            { 
                name: '„É¨„ÉÉ„Ç∞„É¨„Ç§„Ç∫', 
                sets: 2,
                howTo: [
                    '1. ‰ª∞Âêë„Åë„Å´ÂØù„Çã',
                    '2. ‰∏°Êâã„ÅØ‰Ωì„ÅÆÊ®™„ÄÅÊâã„ÅÆ„Å≤„Çâ„ÅØ‰∏ãÂêë„Åç',
                    '3. Ë∂≥„ÇíÊèÉ„Åà„Å¶„Åæ„Å£„Åô„Åê‰º∏„Å∞„Åô',
                    '4. ËÖπÁ≠ã„Çí‰Ωø„Å£„Å¶Ë∂≥„ÇíÊåÅ„Å°‰∏ä„Åí„ÇãÔºà90Â∫¶„Åæ„ÅßÔºâ',
                    '5. „ÇÜ„Å£„Åè„Çä‰∏ã„Çç„ÅôÔºàÂ∫ä„Å´„Å§„Åë„Å™„ÅÑÔºâ',
                    '‚ÄªËÖ∞„ÅåÊµÆ„Åã„Å™„ÅÑ„Çà„ÅÜ„Å´Ê≥®ÊÑè',
                    '‚Äª‰∏ãËÖπÈÉ®„ÇíÊÑèË≠ò'
                ]
            },
            { 
                name: '„É™„Éê„Éº„Çπ„Çπ„Éé„Éº„Ç®„É≥„Ç∏„Çß„É´', 
                sets: 3,
                howTo: [
                    '1. „ÅÜ„Å§‰ºè„Åõ„Å´„Å™„Çã',
                    '2. ‰∏°ËÖï„ÇíÂâç„Å´‰º∏„Å∞„Åô',
                    '3. ËÇ©Áî≤È™®„ÇíÂØÑ„Åõ„Å™„Åå„ÇâËÖï„Çí‰ΩìÂÅ¥„Å´Âºï„Åè',
                    '4. Èõ™„ÅÆÂ§©‰Ωø„ÅÆÈÄÜ„ÅÆÂãï„Åç',
                    '5. „ÇÜ„Å£„Åè„ÇäÂÖÉ„Å´Êàª„Åô',
                    '‚ÄªËÉå‰∏≠„ÅÆÁ≠ãËÇâ„ÇíÂèéÁ∏Æ„Åï„Åõ„Çã',
                    '‚ÄªÂßøÂã¢ÊîπÂñÑ„Å´ÂäπÊûúÁöÑ'
                ]
            },
            { 
                name: '„Éó„É©„É≥„ÇØ', 
                sets: 1,
                howTo: [
                    '1. „ÅÜ„Å§‰ºè„Åõ„Åã„ÇâËÇò„Å®„Å§„ÅæÂÖà„Åß‰Ωì„ÇíÊîØ„Åà„Çã',
                    '2. ‰Ωì„Çí‰∏ÄÁõ¥Á∑ö„Å´‰øù„Å§',
                    '3. „ÅäÂ∞ª„Åå‰∏ä„Åå„Çâ„Å™„ÅÑ„Éª‰∏ã„Åå„Çâ„Å™„ÅÑ',
                    '4. Ê∑±„ÅèÂëºÂê∏„ÇíÁ∂ö„Åë„Çã',
                    '5. ËÖπÁ≠ã„Å®‰ΩìÂππ„Å´Âäõ„ÇíÂÖ•„Çå„Çã',
                    '‚Äª30ÁßíÈñìÂßøÂã¢„Çí„Ç≠„Éº„Éó',
                    '‚ÄªÂëºÂê∏„ÇíÊÑèË≠ò'
                ]
            },
            { 
                name: '„Çµ„Ç§„Éâ„Éó„É©„É≥„ÇØÔºàÂè≥Ôºâ', 
                sets: 1,
                howTo: [
                    '1. Âè≥ÂÅ¥„Çí‰∏ã„Å´„Åó„Å¶Ê®™Âêë„Åç„Å´ÂØù„Çã',
                    '2. Âè≥ËÇò„Å®„Å§„ÅæÂÖà„Åß‰Ωì„ÇíÊîØ„Åà„Å¶ÊåÅ„Å°‰∏ä„Åí„Çã',
                    '3. ‰Ωì„Çí‰∏ÄÁõ¥Á∑ö„Å´‰øù„Å§',
                    '4. Â∑¶Êâã„ÅØËÖ∞„Å´ÁΩÆ„Åè',
                    '5. 30ÁßíÈñì„Ç≠„Éº„Éó',
                    '‚ÄªËÖ∞„ÅåËêΩ„Å°„Å™„ÅÑ„Çà„ÅÜ„Å´',
                    '‚ÄªÂè≥„ÅÆ‰ΩìÂÅ¥„ÅÆÁ≠ãËÇâ„ÇíÊÑèË≠ò'
                ]
            },
            { 
                name: '„Çµ„Ç§„Éâ„Éó„É©„É≥„ÇØÔºàÂ∑¶Ôºâ', 
                sets: 1,
                howTo: [
                    '1. Â∑¶ÂÅ¥„Çí‰∏ã„Å´„Åó„Å¶Ê®™Âêë„Åç„Å´ÂØù„Çã',
                    '2. Â∑¶ËÇò„Å®„Å§„ÅæÂÖà„Åß‰Ωì„ÇíÊîØ„Åà„Å¶ÊåÅ„Å°‰∏ä„Åí„Çã',
                    '3. ‰Ωì„Çí‰∏ÄÁõ¥Á∑ö„Å´‰øù„Å§',
                    '4. Âè≥Êâã„ÅØËÖ∞„Å´ÁΩÆ„Åè',
                    '5. 30ÁßíÈñì„Ç≠„Éº„Éó',
                    '‚ÄªËÖ∞„ÅåËêΩ„Å°„Å™„ÅÑ„Çà„ÅÜ„Å´',
                    '‚ÄªÂ∑¶„ÅÆ‰ΩìÂÅ¥„ÅÆÁ≠ãËÇâ„ÇíÊÑèË≠ò'
                ]
            }
        ];

        const stretches = [
            { 
                name: 'ËÉ∏„ÉªËÇ©„Çπ„Éà„É¨„ÉÉ„ÉÅ', 
                duration: 90,
                howTo: [
                    '„ÄêÂ£ÅÊäº„Åó„Çπ„Éà„É¨„ÉÉ„ÉÅÔºöÂ∑¶Âè≥ÂêÑ30Áßí„Äë',
                    '1. Â£Å„ÅÆÊ®™„Å´Á´ã„Å§',
                    '2. Âè≥Êâã„ÇíÂ£Å„Å´„Å§„Åë„Å¶„ÄÅËÖï„ÇíÂæå„Çç„Å´‰º∏„Å∞„Åô',
                    '3. ‰Ωì„ÇíÂ∑¶ÂÅ¥„Å´„ÇÜ„Å£„Åè„Çä„Å≤„Å≠„Çã',
                    '4. ËÉ∏„Å®ËÇ©„ÅÆÂâçÂÅ¥„Åå‰º∏„Å≥„Çã„ÅÆ„ÇíÊÑü„Åò„Çã',
                    '5. ÂëºÂê∏„ÇíÊ≠¢„ÇÅ„Åö„Å´30Áßí„Ç≠„Éº„Éó',
                    '6. ÂèçÂØæÂÅ¥„ÇÇÂêåÊßò„Å´',
                    '',
                    '„ÄêËÇ©Áî≤È™®Âõû„ÅóÔºö30Áßí„Äë',
                    '1. ‰∏°Êâã„ÇíËÇ©„Å´ÁΩÆ„ÅèÔºàËÇò„ÇíÊõ≤„Åí„ÅüÁä∂ÊÖãÔºâ',
                    '2. ËÇò„ÅßÂ§ß„Åç„Å™ÂÜÜ„ÇíÊèè„Åè„Çà„ÅÜ„Å´Âõû„Åô',
                    '3. ÂâçÂõû„Åó15Áßí ‚Üí Âæå„ÇçÂõû„Åó15Áßí',
                    '4. ËÇ©Áî≤È™®„ÇíÂ§ß„Åç„ÅèÂãï„Åã„ÅôÊÑèË≠ò'
                ]
            },
            { 
                name: 'ËÉå‰∏≠„Éª‰ΩìÂÅ¥„Çπ„Éà„É¨„ÉÉ„ÉÅ', 
                duration: 90,
                howTo: [
                    '„Äê„ÉÅ„É£„Ç§„É´„Éâ„Éù„Éº„Ç∫Ôºö45Áßí„Äë',
                    '1. Âõõ„Å§„ÇìÈÄô„ÅÑ„Å´„Å™„Çã',
                    '2. „ÅäÂ∞ª„Çí„Åã„Åã„Å®„Å´Ëøë„Å•„Åë„Å™„Åå„ÇâÂ∫ß„Çã',
                    '3. ‰∏°Êâã„ÇíÂâç„Å´‰º∏„Å∞„Åó„Å¶Â∫ä„Å´„Å§„Åë„Çã',
                    '4. „Åä„Åß„Åì„ÇÇÂ∫ä„Å´„Å§„Åë„Çã',
                    '5. Ê∑±ÂëºÂê∏„Åó„Å™„Åå„Çâ„É™„É©„ÉÉ„ÇØ„Çπ',
                    '6. ËÉå‰∏≠ÂÖ®‰Ωì„Åå‰º∏„Å≥„Çã„ÅÆ„ÇíÊÑü„Åò„Çã',
                    '',
                    '„Äê„Ç≠„É£„ÉÉ„Éà&„Ç´„Ç¶Ôºö45Áßí„Äë',
                    '1. Âõõ„Å§„ÇìÈÄô„ÅÑ„Å´„Å™„Çã',
                    '2. „Ç≠„É£„ÉÉ„ÉàÔºöÊÅØ„ÇíÂêê„Åç„Å™„Åå„ÇâËÉå‰∏≠„Çí‰∏∏„ÇÅ„Çã',
                    '3. „Ç´„Ç¶ÔºöÊÅØ„ÇíÂê∏„ÅÑ„Å™„Åå„ÇâËÉå‰∏≠„ÇíÂèç„Çâ„Åô',
                    '4. „ÇÜ„Å£„Åè„ÇäÁπ∞„ÇäËøî„ÅôÔºà5-6ÂõûÔºâ',
                    '5. ËÉåÈ™®„ÇíÂãï„Åã„ÅôÊÑèË≠ò'
                ]
            },
            { 
                name: 'ËÇ°Èñ¢ÁØÄ„Éª‰∏ãÂçäË∫´„Çπ„Éà„É¨„ÉÉ„ÉÅ', 
                duration: 120,
                howTo: [
                    '„Äê„É©„É≥„Ç∏„Çπ„Éà„É¨„ÉÉ„ÉÅÔºöÂ∑¶Âè≥ÂêÑ45Áßí„Äë',
                    '1. Âè≥Ë∂≥„ÇíÂ§ß„Åç„ÅèÂâç„Å´Âá∫„ÅôÔºàËÜù„Çí90Â∫¶Ôºâ',
                    '2. Â∑¶Ë∂≥„ÅØÂæå„Çç„Å´‰º∏„Å∞„ÅôÔºàËÜù„ÅØÂ∫ä„Å´„Å§„Åë„Å¶OKÔºâ',
                    '3. ËÖ∞„ÇíÂâç„Å´Êäº„ÅóÂá∫„Åô„Çà„ÅÜ„Å´',
                    '4. Â∑¶„ÅÆËÇ°Èñ¢ÁØÄÂâçÂÅ¥„Åå‰º∏„Å≥„Çã„ÅÆ„ÇíÊÑü„Åò„Çã',
                    '5. ËÉåÁ≠ã„ÅØ‰º∏„Å∞„Åó„Åü„Åæ„Åæ',
                    '6. 45Áßí„Ç≠„Éº„Éó„Åó„Å¶ÂèçÂØæÂÅ¥„ÇÇ',
                    '',
                    '„ÄêÈñãËÑöÂâçÂ±àÔºö30Áßí„Äë',
                    '1. Ë∂≥„ÇíÂ∑¶Âè≥„Å´Â§ß„Åç„ÅèÈñã„ÅÑ„Å¶Â∫ß„Çã',
                    '2. ËÉåÁ≠ã„Çí‰º∏„Å∞„Åó„Åü„Åæ„Åæ„ÄÅ‰∏ä‰Ωì„ÇíÂâç„Å´ÂÄí„Åô',
                    '3. ÁÑ°ÁêÜ„Åõ„Åö„ÄÅÁóõÊ∞óÊåÅ„Å°„ÅÑ„ÅÑ„Å®„Åì„Çç„Åß',
                    '4. Ê∑±ÂëºÂê∏„Åó„Å™„Åå„Çâ30Áßí„Ç≠„Éº„Éó'
                ]
            },
            { 
                name: 'ËÖπÁ≠ã„ÉªÂëºÂê∏„Çπ„Éà„É¨„ÉÉ„ÉÅ', 
                duration: 120,
                howTo: [
                    '„Äê„Ç≥„Éñ„É©„Éù„Éº„Ç∫Ôºö45Áßí„Äë',
                    '1. „ÅÜ„Å§‰ºè„Åõ„Å´„Å™„Çã',
                    '2. Êâã„ÅÆ„Å≤„Çâ„ÇíËÉ∏„ÅÆÊ®™„Å´ÁΩÆ„Åè',
                    '3. ËÖï„Åß‰∏ä‰Ωì„ÇíÊåÅ„Å°‰∏ä„Åí„Çã',
                    '4. ËÖ∞„ÅØÂ∫ä„Å´„Å§„Åë„Åü„Åæ„Åæ„ÄÅËÉ∏„ÇíÈñã„Åè',
                    '5. È°î„ÅØÊñú„ÇÅ‰∏ä„ÇíÂêë„Åè',
                    '6. ËÖπÁ≠ã„Åå‰º∏„Å≥„Å¶„ÄÅËÉ∏ÈÉ≠„ÅåÂ∫É„Åå„Çã',
                    '7. Ê∑±ÂëºÂê∏„Åó„Å™„Åå„Çâ45Áßí„Ç≠„Éº„Éó',
                    '',
                    '„Äê‰ª∞Âêë„ÅëÊ∑±ÂëºÂê∏Ôºö75Áßí„Äë',
                    '1. ‰ª∞Âêë„Åë„Å´ÂØù„Çã',
                    '2. ‰∏°ËÜù„ÇíÊä±„Åà„Å¶ËÉ∏„Å´Âºï„ÅçÂØÑ„Åõ„ÇãÔºà20ÁßíÔºâ',
                    '3. Ë∂≥„Çí‰º∏„Å∞„Åó„ÄÅËÖï„ÇíÈ†≠‰∏ä„Å´‰º∏„Å∞„ÅôÔºà20ÁßíÔºâ',
                    '4. ÂÖ®Ë∫´ËÑ±Âäõ„Åó„Å¶„É™„É©„ÉÉ„ÇØ„ÇπÔºà35ÁßíÔºâ',
                    '5. ËÖπÂºèÂëºÂê∏„ÇíÊÑèË≠òÔºö',
                    '   Èºª„Åã„ÇâÂê∏„Å£„Å¶„ÅäËÖπ„ÇíËÜ®„Çâ„Åæ„Åõ„ÇãÔºà4ÁßíÔºâ',
                    '   Âè£„Åã„ÇâÂêê„ÅÑ„Å¶„ÅäËÖπ„Çí„Å∏„Åì„Åæ„Åõ„ÇãÔºà6ÁßíÔºâ'
                ]
            }
        ];

        let currentSet = 0;
        let isWorking = true;
        let timeLeft = 10;
        let isPaused = false;
        let isStretchPhase = false;
        let currentStretchIndex = 0;
        let timer = null;
        let isPreparation = true;
        let audioContext = null;

        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
        }

        function generateTimeline() {
            const hiitTimelineEl = document.getElementById('hiitTimeline');
            const stretchTimelineEl = document.getElementById('stretchTimeline');

            let itemNumber = 0;
            hiitExercises.forEach((exercise, exIndex) => {
                for (let i = 0; i < exercise.sets; i++) {
                    const workItem = document.createElement('div');
                    workItem.className = 'timeline-item work-item upcoming';
                    workItem.id = `hiit-${itemNumber}-work`;
                    workItem.onclick = () => showExerciseHowTo(exIndex, false);
                    workItem.innerHTML = `
                        <div class="timeline-icon">üí™</div>
                        <div class="timeline-content">
                            <div class="timeline-exercise">${exercise.name}</div>
                            <div class="timeline-duration">30Áßí</div>
                        </div>
                    `;
                    hiitTimelineEl.appendChild(workItem);

                    const restItem = document.createElement('div');
                    restItem.className = 'timeline-item rest-item upcoming';
                    restItem.id = `hiit-${itemNumber}-rest`;
                    restItem.innerHTML = `
                        <div class="timeline-icon">‚è∏</div>
                        <div class="timeline-content">
                            <div class="timeline-exercise">‰ºëÊÜ©</div>
                            <div class="timeline-duration">15Áßí</div>
                        </div>
                    `;
                    hiitTimelineEl.appendChild(restItem);

                    itemNumber++;
                }
            });

            stretches.forEach((stretch, index) => {
                const item = document.createElement('div');
                item.className = 'timeline-item upcoming';
                item.id = `stretch-${index}`;
                item.onclick = () => showExerciseHowTo(index, true);
                item.innerHTML = `
                    <div class="timeline-icon">üßò</div>
                    <div class="timeline-content">
                        <div class="timeline-exercise">${stretch.name}</div>
                        <div class="timeline-duration">${stretch.duration}Áßí</div>
                    </div>
                `;
                stretchTimelineEl.appendChild(item);
            });
        }

        function showExerciseHowTo(index, isStretch) {
            const modal = document.getElementById('howToModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalSteps = document.getElementById('modalSteps');

            const exerciseData = isStretch ? stretches[index] : hiitExercises[index];
            modalTitle.textContent = exerciseData.name;
            
            const steps = exerciseData.howTo || [];
            modalSteps.innerHTML = steps.map(step => `<li>${step}</li>`).join('');

            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function updateTimeline() {
            if (isPreparation) return;

            document.querySelectorAll('.timeline-item').forEach(item => {
                item.classList.remove('current', 'completed', 'upcoming');
                item.classList.add('upcoming');
            });

            if (isStretchPhase) {
                for (let i = 0; i < 18; i++) {
                    const workItem = document.getElementById(`hiit-${i}-work`);
                    const restItem = document.getElementById(`hiit-${i}-rest`);
                    if (workItem) workItem.classList.replace('upcoming', 'completed');
                    if (restItem) restItem.classList.replace('upcoming', 'completed');
                }

                for (let i = 0; i < stretches.length; i++) {
                    const item = document.getElementById(`stretch-${i}`);
                    if (i < currentStretchIndex) {
                        item.classList.replace('upcoming', 'completed');
                    } else if (i === currentStretchIndex) {
                        item.classList.replace('upcoming', 'current');
                        item.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            } else {
                for (let i = 0; i < 18; i++) {
                    const workItem = document.getElementById(`hiit-${i}-work`);
                    const restItem = document.getElementById(`hiit-${i}-rest`);
                    
                    if (i < currentSet) {
                        if (workItem) workItem.classList.replace('upcoming', 'completed');
                        if (restItem) restItem.classList.replace('upcoming', 'completed');
                    } else if (i === currentSet) {
                        if (isWorking) {
                            if (workItem) {
                                workItem.classList.replace('upcoming', 'current');
                                workItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            }
                            if (restItem) restItem.classList.add('upcoming');
                        } else {
                            if (workItem) workItem.classList.replace('upcoming', 'completed');
                            if (restItem) {
                                restItem.classList.replace('upcoming', 'current');
                                restItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            }
                        }
                    }
                }
            }
        }

        function getCurrentExercise() {
            let setCount = 0;
            for (let i = 0; i < hiitExercises.length; i++) {
                if (currentSet < setCount + hiitExercises[i].sets) {
                    return hiitExercises[i].name;
                }
                setCount += hiitExercises[i].sets;
            }
            return '„Éê„Éº„Éî„Éº';
        }

        function getCurrentExerciseData() {
            if (isStretchPhase) {
                return stretches[currentStretchIndex];
            }
            
            let setCount = 0;
            for (let i = 0; i < hiitExercises.length; i++) {
                if (currentSet < setCount + hiitExercises[i].sets) {
                    return hiitExercises[i];
                }
                setCount += hiitExercises[i].sets;
            }
            return hiitExercises[0];
        }

        function showHowTo() {
            const exerciseData = getCurrentExerciseData();
            const modal = document.getElementById('howToModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalSteps = document.getElementById('modalSteps');

            modalTitle.textContent = exerciseData.name;
            
            const steps = exerciseData.howTo || [];
            modalSteps.innerHTML = steps.map(step => `<li>${step}</li>`).join('');

            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeHowTo() {
            const modal = document.getElementById('howToModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function closeModalOnOutside(event) {
            if (event.target.id === 'howToModal') {
                closeHowTo();
            }
        }

        function updateDisplay() {
            const timerEl = document.getElementById('timer');
            const exerciseEl = document.getElementById('exercise');
            const statusEl = document.getElementById('status');
            const progressText = document.getElementById('progressText');

            timerEl.textContent = timeLeft;

            if (isPreparation) {
                exerciseEl.textContent = 'Ê∫ñÂÇô';
                statusEl.textContent = 'Ê∫ñÂÇô‰∏≠';
                statusEl.className = 'status preparation';
                timerEl.className = 'timer preparation';
                progressText.textContent = '0 / 22';
            } else if (isStretchPhase) {
                exerciseEl.textContent = stretches[currentStretchIndex].name;
                statusEl.textContent = '„Çπ„Éà„É¨„ÉÉ„ÉÅ';
                statusEl.className = 'status stretch';
                timerEl.className = 'timer stretch';
                progressText.textContent = `${18 + currentStretchIndex + 1} / 22`;
            } else {
                if (isWorking) {
                    exerciseEl.textContent = getCurrentExercise();
                    statusEl.textContent = 'ÈÅãÂãï‰∏≠';
                    statusEl.className = 'status work';
                    timerEl.className = 'timer work';
                } else {
                    exerciseEl.textContent = '‰ºëÊÜ©';
                    statusEl.textContent = '‰ºëÊÜ©‰∏≠';
                    statusEl.className = 'status rest';
                    timerEl.className = 'timer rest';
                }
                progressText.textContent = `${currentSet + 1} / 22`;
            }

            let totalSets = 18 + 4;
            let currentProgress = isPreparation ? 0 : (isStretchPhase ? 18 + currentStretchIndex : currentSet);
            let progress = (currentProgress / totalSets) * 100;
            document.getElementById('progress').style.width = progress + '%';

            updateTimeline();
        }

        function playBeep(frequency = 800, duration = 200, volume = 0.7) {
            try {
                initAudio();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(volume, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration / 1000);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration / 1000);
            } catch (e) {
                console.log('Audio not supported:', e);
            }
        }

        function startWorkout() {
            if (timer) return;
            
            initAudio();
            
            document.getElementById('startBtn').disabled = true;
            document.getElementById('pauseBtn').disabled = false;
            isPaused = false;
            isPreparation = true;
            timeLeft = 10;
            
            playBeep(600, 300, 0.7);
            
            timer = setInterval(() => {
                if (isPaused) return;
                
                timeLeft--;
                
                if (timeLeft <= 5 && timeLeft > 0) {
                    playBeep(1000, 150, 0.7);
                }
                
                if (timeLeft <= 0) {
                    playBeep(1400, 400, 0.8);
                    
                    if (isPreparation) {
                        isPreparation = false;
                        isWorking = true;
                        timeLeft = 30;
                    } else if (isStretchPhase) {
                        currentStretchIndex++;
                        if (currentStretchIndex >= stretches.length) {
                            clearInterval(timer);
                            timer = null;
                            playBeep(1600, 600, 0.8);
                            alert('üéâ ÂÆå‰∫ÜÔºÅ');
                            resetWorkout();
                            return;
                        }
                        timeLeft = stretches[currentStretchIndex].duration;
                    } else {
                        if (isWorking) {
                            isWorking = false;
                            timeLeft = 15;
                        } else {
                            isWorking = true;
                            currentSet++;
                            
                            if (currentSet >= 18) {
                                isStretchPhase = true;
                                currentStretchIndex = 0;
                                timeLeft = stretches[0].duration;
                            } else {
                                timeLeft = 30;
                            }
                        }
                    }
                }
                
                updateDisplay();
            }, 1000);
        }

        function togglePause() {
            isPaused = !isPaused;
            document.getElementById('pauseBtn').innerHTML = isPaused ? '‚ñ∂ Resume' : '‚è∏ Pause';
            
            if (!isPaused) {
                playBeep(600, 200, 0.6);
            }
        }

        function resetWorkout() {
            clearInterval(timer);
            timer = null;
            currentSet = 0;
            isWorking = true;
            timeLeft = 10;
            isPaused = false;
            isStretchPhase = false;
            currentStretchIndex = 0;
            isPreparation = true;
            
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
            document.getElementById('pauseBtn').innerHTML = '‚è∏ Pause';
            
            document.getElementById('status').textContent = 'Ready';
            document.getElementById('status').className = 'status';
            document.getElementById('exercise').textContent = '„Éê„Éº„Éî„Éº';
            
            updateDisplay();
        }

        generateTimeline();
        updateDisplay();
    </script>
</body>
</html>
